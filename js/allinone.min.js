!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){function n(t){var e=t._util;e.elements=function(t){for(var e=[],o=(t=t.root.querySelectorAll(t.selector)).length;o--;e.unshift(t[o]));return e}(t.options),e.count=e.elements.length,e.destroyed&&(e.destroyed=!1,t.options.container&&v(t.options.container,function(t){p(t,"scroll",e.validateT)}),p(window,"resize",e.saveViewportOffsetT),p(window,"resize",e.validateT),p(window,"scroll",e.validateT)),i(t)}function i(t){for(var e=t._util,o=0;o<e.count;o++){var n,i=e.elements[o],r=i;n=t.options;var a=r.getBoundingClientRect();n.container&&S&&(r=r.closest(n.containerClass))?n=!!s(r=r.getBoundingClientRect(),w)&&s(a,{top:r.top-n.offset,right:r.right+n.offset,bottom:r.bottom+n.offset,left:r.left-n.offset}):n=s(a,w),(n||f(i,t.options.successClass))&&(t.load(i),e.elements.splice(o,1),e.count--,o--)}0===e.count&&t.destroy()}function s(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}function a(t,e,n){if(!f(t,n.successClass)&&(e||n.loadInvisible||0<t.offsetWidth&&0<t.offsetHeight))if(e=t.getAttribute(g)||t.getAttribute(n.src)){var o=(e=e.split(n.separator))[y&&1<e.length?1:0],i=t.getAttribute(n.srcset),r="img"===t.nodeName.toLowerCase(),a=(e=t.parentNode)&&"picture"===e.nodeName.toLowerCase();if(r||void 0===t.src){var s=new Image,c=function(){n.error&&n.error(t,"invalid"),m(t,n.errorClass),h(s,"error",c),h(s,"load",l)},l=function(){r?a||d(t,o,i):t.style.backgroundImage='url("'+o+'")',u(t,n),h(s,"load",l),h(s,"error",c)};a&&(s=t,v(e.getElementsByTagName("source"),function(t){var e=n.srcset,o=t.getAttribute(e);o&&(t.setAttribute("srcset",o),t.removeAttribute(e))})),p(s,"error",c),p(s,"load",l),d(s,o,i)}else t.src=o,u(t,n)}else"video"===t.nodeName.toLowerCase()?(v(t.getElementsByTagName("source"),function(t){var e=n.src,o=t.getAttribute(e);o&&(t.setAttribute("src",o),t.removeAttribute(e))}),t.load(),u(t,n)):(n.error&&n.error(t,"missing"),m(t,n.errorClass))}function u(e,t){m(e,t.successClass),t.success&&t.success(e),e.removeAttribute(t.src),e.removeAttribute(t.srcset),v(t.breakpoints,function(t){e.removeAttribute(t.src)})}function d(t,e,o){o&&t.setAttribute("srcset",o),t.src=e}function f(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function m(t,e){f(t,e)||(t.className+=" "+e)}function c(t){w.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,w.right=(window.innerWidth||document.documentElement.clientWidth)+t}function p(t,e,o){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,o):t.addEventListener(e,o,{capture:!1,passive:!0})}function h(t,e,o){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,o):t.removeEventListener(e,o,{capture:!1,passive:!0})}function v(t,e){if(t&&e)for(var o=t.length,n=0;n<o&&!1!==e(t[n],n);n++);}function l(e,o,n){var i=0;return function(){var t=+new Date;t-i<o||(i=t,e.apply(n,arguments))}}var g,w,y,S;return function(t){if(!document.querySelectorAll){var r=document.createStyleSheet();document.querySelectorAll=function(t,e,o,n,i){for(i=document.all,e=[],o=(t=t.replace(/\[for\b/gi,"[htmlFor").split(",")).length;o--;){for(r.addRule(t[o],"k:v"),n=i.length;n--;)i[n].currentStyle.k&&e.push(i[n]);r.removeRule(0)}return e}}var e=this,o=e._util={};o.elements=[],o.destroyed=!0,e.options=t||{},e.options.error=e.options.error||!1,e.options.offset=e.options.offset||100,e.options.root=e.options.root||document,e.options.success=e.options.success||!1,e.options.selector=e.options.selector||".b-lazy",e.options.separator=e.options.separator||"|",e.options.containerClass=e.options.container,e.options.container=!!e.options.containerClass&&document.querySelectorAll(e.options.containerClass),e.options.errorClass=e.options.errorClass||"b-error",e.options.breakpoints=e.options.breakpoints||!1,e.options.loadInvisible=e.options.loadInvisible||!1,e.options.successClass=e.options.successClass||"b-loaded",e.options.validateDelay=e.options.validateDelay||25,e.options.saveViewportOffsetDelay=e.options.saveViewportOffsetDelay||50,e.options.srcset=e.options.srcset||"data-srcset",e.options.src=g=e.options.src||"data-src",S=Element.prototype.closest,y=1<window.devicePixelRatio,(w={}).top=0-e.options.offset,w.left=0-e.options.offset,e.revalidate=function(){n(e)},e.load=function(t,e){var o=this.options;void 0===t.length?a(t,e,o):v(t,function(t){a(t,e,o)})},e.destroy=function(){var e=this._util;this.options.container&&v(this.options.container,function(t){h(t,"scroll",e.validateT)}),h(window,"scroll",e.validateT),h(window,"resize",e.validateT),h(window,"resize",e.saveViewportOffsetT),e.count=0,e.elements.length=0,e.destroyed=!0},o.validateT=l(function(){i(e)},e.options.validateDelay,e),o.saveViewportOffsetT=l(function(){c(e.options.offset)},e.options.saveViewportOffsetDelay,e),c(e.options.offset),v(e.options.breakpoints,function(t){if(t.width>=window.screen.width)return g=t.src,!1}),setTimeout(function(){n(e)})}}),console.log("v16.1.0"),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,o=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=o.length;0<=--e&&o.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n}),function(){if("function"==typeof window.CustomEvent)return;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(){for(var r=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var o=(new Date).getTime(),n=Math.max(0,16-(o-r)),i=window.setTimeout(function(){t(o+n)},n);return r=o+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.SmoothScroll=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(E){"use strict";function A(){var o={};return Array.prototype.forEach.call(arguments,function(t){for(var e in t){if(!t.hasOwnProperty(e))return;o[e]=t[e]}}),o}function r(e){var o;try{o=decodeURIComponent(e)}catch(t){o=e}return o}function a(t){"#"===t.charAt(0)&&(t=t.substr(1));for(var e,o=String(t),n=o.length,i=-1,r="",a=o.charCodeAt(0);++i<n;){if(0===(e=o.charCodeAt(i)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");1<=e&&e<=31||127==e||0===i&&48<=e&&e<=57||1===i&&48<=e&&e<=57&&45===a?r+="\\"+e.toString(16)+" ":r+=128<=e||45===e||95===e||48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122?o.charAt(i):"\\"+o.charAt(i)}return"#"+r}function C(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function O(t){return t?function(t){return parseInt(E.getComputedStyle(t).height,10)}(t)+t.offsetTop:0}function I(t,e,o,n){if(e.emitEvents&&"function"==typeof E.CustomEvent){var i=new CustomEvent(t,{bubbles:!0,detail:{anchor:o,toggle:n}});document.dispatchEvent(i)}}var L={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0};return function(n,t){var w,i,y,S,b={};b.cancelScroll=function(t){cancelAnimationFrame(S),S=null,t||I("scrollCancel",w)},b.animateScroll=function(n,i,t){b.cancelScroll();var r=A(w||L,t||{}),a="[object Number]"===Object.prototype.toString.call(n),e=a||!n.tagName?null:n;if(a||e){var s=E.pageYOffset;r.header&&!y&&(y=document.querySelector(r.header));var c,o,l,u=O(y),d=a?n:function(t,e,o,n){var i=0;if(t.offsetParent)for(;i+=t.offsetTop,t=t.offsetParent;);return i=Math.max(i-e-o,0),n&&(i=Math.min(i,C()-E.innerHeight)),i}(e,u,parseInt("function"==typeof r.offset?r.offset(n,i):r.offset,10),r.clip),f=d-s,m=C(),p=0,h=function(t,e){var o=e.speedAsDuration?e.speed:Math.abs(t/1e3*e.speed);return e.durationMax&&o>e.durationMax?e.durationMax:e.durationMin&&o<e.durationMin?e.durationMin:parseInt(o,10)}(f,r),v=function(t,e){var o=E.pageYOffset;if(t==e||o==e||(s<e&&E.innerHeight+o)>=m)return b.cancelScroll(!0),function(t,e,o){0===t&&document.body.focus(),o||(t.focus(),document.activeElement!==t&&(t.setAttribute("tabindex","-1"),t.focus(),t.style.outline="none"),E.scrollTo(0,e))}(n,e,a),I("scrollStop",r,n,i),!(S=c=null)},g=function(t){p+=t-(c=c||t),l=s+f*function(t,e){var o;return"easeInQuad"===t.easing&&(o=e*e),"easeOutQuad"===t.easing&&(o=e*(2-e)),"easeInOutQuad"===t.easing&&(o=e<.5?2*e*e:(4-2*e)*e-1),"easeInCubic"===t.easing&&(o=e*e*e),"easeOutCubic"===t.easing&&(o=--e*e*e+1),"easeInOutCubic"===t.easing&&(o=e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1),"easeInQuart"===t.easing&&(o=e*e*e*e),"easeOutQuart"===t.easing&&(o=1- --e*e*e*e),"easeInOutQuart"===t.easing&&(o=e<.5?8*e*e*e*e:1-8*--e*e*e*e),"easeInQuint"===t.easing&&(o=e*e*e*e*e),"easeOutQuint"===t.easing&&(o=1+--e*e*e*e*e),"easeInOutQuint"===t.easing&&(o=e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e),t.customEasing&&(o=t.customEasing(e)),o||e}(r,o=1<(o=0===h?0:p/h)?1:o),E.scrollTo(0,Math.floor(l)),v(l,d)||(S=E.requestAnimationFrame(g),c=t)};0===E.pageYOffset&&E.scrollTo(0,0),function(t,e,o){e||history.pushState&&o.updateURL&&history.pushState({smoothScroll:JSON.stringify(o),anchor:t.id},document.title,t===document.documentElement?"#top":"#"+t.id)}(n,a,r),"matchMedia"in E&&E.matchMedia("(prefers-reduced-motion)").matches?E.scrollTo(0,Math.floor(d)):(I("scrollStart",r,n,i),b.cancelScroll(!0),E.requestAnimationFrame(g))}};function e(t){if(!t.defaultPrevented&&!(0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey)&&"closest"in t.target&&(i=t.target.closest(n))&&"a"===i.tagName.toLowerCase()&&!t.target.closest(w.ignore)&&i.hostname===E.location.hostname&&i.pathname===E.location.pathname&&/#/.test(i.href)){var e,o=a(r(i.hash));if("#"===o){if(!w.topOnEmptyHash)return;e=document.documentElement}else e=document.querySelector(o);(e=e||"#top"!==o?e:document.documentElement)&&(t.preventDefault(),function(t){if(history.replaceState&&t.updateURL&&!history.state){var e=E.location.hash;e=e||"",history.replaceState({smoothScroll:JSON.stringify(t),anchor:e||E.pageYOffset},document.title,e||E.location.href)}}(w),b.animateScroll(e,i))}}function o(t){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(w)){var e=history.state.anchor;"string"==typeof e&&e&&!(e=document.querySelector(a(r(history.state.anchor))))||b.animateScroll(e,null,{updateURL:!1})}}b.destroy=function(){w&&(document.removeEventListener("click",e,!1),E.removeEventListener("popstate",o,!1),b.cancelScroll(),S=y=i=w=null)};return function(){if(!("querySelector"in document&&"addEventListener"in E&&"requestAnimationFrame"in E&&"closest"in E.Element.prototype))throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";b.destroy(),w=A(L,t||{}),y=w.header?document.querySelector(w.header):null,document.addEventListener("click",e,!1),w.updateURL&&w.popstate&&E.addEventListener("popstate",o,!1)}(),b}});var keepSearchData=function(t){fetch(t+"searchData.json").then(function(t){return t.json()}).then(function(t){localStorage.setItem("searchData",JSON.stringify(t))})},checkAndGetData=function(e){fetch(e+"searchVersion.txt?t="+ +new Date).then(function(t){return t.text()}).then(function(t){localStorage.getItem("searchVersion")!==t&&(localStorage.setItem("searchVersion",t),keepSearchData(e))})},searchFunc=function(t){checkAndGetData(t);var e=localStorage.getItem("searchData"),o=JSON.parse(e),n=document.getElementById("local-search-input");if(n){var i=document.getElementById("local-search-result");n.addEventListener("input",function(){"string"!=typeof e&&(e=localStorage.getItem("searchData"),o=JSON.parse(e)),printRs(this,o,i)})}},searchFuncSW=function(t){fetch(t+"searchData.json").then(function(t){return t.json()}).then(function(t){var e=JSON.stringify(t),o=JSON.parse(e),n=document.getElementById("local-search-input");if(n){var i=document.getElementById("local-search-result");n.addEventListener("input",function(){printRs(this,o,i)})}})},printRs=function(t,e,o){var f='<ul class="search-result-list">',m=t.value.trim().toLowerCase().split(/[\s\-]+/);o.innerHTML="",t.value.trim().length<=0||(e.forEach(function(t){var o=!0;t.title&&""!==t.title.trim()||(t.title="Untitled");var n=t.title.trim().toLowerCase(),i=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url,r=-1,a=-1,s=-1;if(""!==i?m.forEach(function(t,e){r=n.indexOf(t),a=i.indexOf(t),r<0&&a<0?o=!1:(a<0&&(a=0),0==e&&(s=a))}):o=!1,o){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=s){var l=s-20,u=s+80;l<0&&(l=0),0==l&&(u=100),u>c.length&&(u=c.length);var d=c.substr(l,u);m.forEach(function(t){var e=new RegExp(t,"gi");d=d.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+d+"...</p>"}f+="</li>"}}),f+="</ul>",o.innerHTML=f)},scroll=new SmoothScroll(".toc-btn, .toc-link",{speed:1e3,easing:"easeInOutCubic",speedAsDuration:!0,clip:!0}),postProgressBar=function(){var n=document.querySelector("progress"),i=document.querySelector(".floating-header"),r=document.querySelector(".post-full-title"),a=window.scrollY,s=window.innerHeight,c=!1;function t(){var t=r.getBoundingClientRect().top+window.scrollY,e=r.offsetHeight+35,o=document.body.offsetHeight-s;t+e<=a?i.classList.add("floating-active"):i.classList.remove("floating-active"),n.setAttribute("max",o),n.setAttribute("value",a),c=!1}window.addEventListener("scroll",function(){a=window.scrollY,function(){c||requestAnimationFrame(t);c=!0}()},{passive:!0}),t()};if(document.querySelector(".toc-bar")){var tocBar=document.querySelector(".toc-bar "),tocOpen=document.querySelector(".toc-open"),tocClose=document.querySelector(".toc-close"),tocSwitch=document.querySelector(".toc-switch"),tocMain=document.querySelector(".toc-main"),tocWidth=window.getComputedStyle(tocMain).width.replace("px","");"768"<=document.body.clientWidth&&(tocBar.style.right=-tocWidth+"px"),window.addEventListener("resize",function(){var t=window.getComputedStyle(tocMain).width.replace("px","");tocBar.removeAttribute("style"),"768"<=document.body.clientWidth?tocBar.style.right=-t+"px":tocBar.style.top="100%"}),tocSwitch.addEventListener("click",function(){var t=window.getComputedStyle(tocMain).width.replace("px","");window.requestAnimationFrame(function(){tocOpen.classList.contains("hide")?("768"<=document.body.clientWidth?tocBar.style.right=-t+"px":tocBar.style.top="100%",tocClose.classList.add("hide"),tocOpen.classList.remove("hide")):("768"<=document.body.clientWidth?tocBar.style.right=0:tocBar.style.top=0,tocOpen.classList.add("hide"),tocClose.classList.remove("hide"))})});var tocItem=document.querySelectorAll(".toc-link");tocItem.forEach(function(t){t.addEventListener("click",function(){window.requestAnimationFrame(function(){document.body.clientWidth<"768"&&(tocBar.style.top="100%",tocClose.classList.add("hide"),tocOpen.classList.remove("hide"))})})})}var openPhotoSwipe=function(t,n,e){for(var o=[],i={},r=0;r<n.length;r++){var a=n[r].getAttribute("data-img");i={src:a,msrc:a,w:200,h:200},o.push(i)}var s={zoomEl:!0,arrowEl:!0,shareEl:!1,preloaderEl:!1,captionEl:!1,history:!1,showAnimationDuration:0,hideAnimationDuration:500,index:parseInt(e,10),getThumbBoundsFn:function(t){var e=window.pageYOffset||document.documentElement.scrollTop,o=n[t].getBoundingClientRect();return{x:o.left,y:o.top+e,w:o.width}}},c=new PhotoSwipe(t,PhotoSwipeUI_Default,o,s);c.listen("gettingData",function(t,e){if(200===e.h||200===e.w){var o=new Image;o.onload=function(){e.w=parseInt(o.width,10),e.h=parseInt(o.height,10),c.updateSize(!0)},o.src=e.src}}),c.init()},initPagePhotoSwipe=function(){var o=document.querySelectorAll(".pswp")[0];if(o){var n=document.querySelectorAll(".post-img");0!==n.length&&n.forEach(function(t){var e=t.getAttribute("data-index");t.addEventListener("click",function(t){t.stopPropagation(),openPhotoSwipe(o,n,e)},!1)})}};initPagePhotoSwipe();